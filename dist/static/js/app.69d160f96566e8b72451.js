webpackJsonp([1],{"+skl":function(t,s){},EAJb:function(t,s){},NHnr:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("7+uW"),r={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},staticRenderFns:[]};var o=e("VU/8")({name:"App"},r,!1,function(t){e("d5lC")},null,null).exports,i=e("/ocq"),n={name:"home",data:function(){return{directionMode:[[1,0],[0,1],[1,1],[1,-1]],step:0,chessMapArr:[],chessColor:["black","white"],historyPos:[],hisValArr:[],stepHis:0,showModal:!1,endFlag:!1,win:""}},mounted:function(){var t=this;document.getElementById("myCanvas").getContext?(this.drawChessBoard(),this.$refs.canvas.addEventListener("click",function(s){if(t.endFlag)t.$alert("Game over, restart?","alert");else if(!(s.offsetX<25||s.offsetX>450||s.offsetY<25||s.offsetY>450)){var e=30*Math.floor((s.offsetX+15)/30),a=30*Math.floor((s.offsetY+15)/30);if(0==t.chessMapArr[e/30-1][a/30-1]){t.drawChess(e,a,t.chessColor[t.step%2]),t.chessMapArr[e/30-1][a/30-1]=t.chessColor[t.step%2],t.historyPos.length=t.step,t.historyPos.push({cx:e,cy:a,color:t.chessColor[t.step%2]}),t.hisValArr.push({cx:e,cy:a,color:t.chessColor[t.step%2]}),t.stepHis++;for(var r=0;r<4;r++)t.judgeWin(e/30-1,a/30-1,t.chessColor[t.step%2],t.directionMode[r]);t.step++}else t.$alert("You cannot put it here！","alert")}})):this.$alert("Current server doesn't support Canvas, please try another server.","alert")},methods:{initArr:function(){for(var t=0;t<15;t++){this.chessMapArr[t]=[];for(var s=0;s<15;s++)this.chessMapArr[t][s]=0}},drawChessBoard:function(){this.initArr();var t=this.$refs.canvas,s=t.getContext("2d");s.strokeStyle="#666";for(var e=0;e<15;e++)s.beginPath(),s.moveTo(30*(e+1),30),s.lineTo(30*(e+1),t.height-30),s.closePath(),s.stroke(),s.beginPath(),s.moveTo(30,30*(e+1)),s.lineTo(t.width-30,30*(e+1)),s.closePath(),s.stroke()},drawChess:function(t,s,e){var a=this.$refs.canvas.getContext("2d");a.beginPath(),a.arc(t,s,15,0,2*Math.PI,!1),a.closePath(),a.fillStyle=e,a.fill()},judgeWin:function(t,s,e,a){console.log(t,s,e,a);for(var r=1,o=1;o<5;o++)if(this.chessMapArr[t+o*a[0]]){if(this.chessMapArr[t+o*a[0]][s+o*a[1]]!=e)break;r++}for(var i=1;i<5;i++)if(this.chessMapArr[t-i*a[0]]){if(this.chessMapArr[t-i*a[0]][s-i*a[1]]!=e)break;r++}r>=5&&("black"==e?(this.win="Black WIN!",this.showModal=!0):(this.win="White WIN!",this.showModal=!0),this.endFlag=!0)},reDraw:function(){var t=this.$refs.canvas,s=t.getContext("2d");s.fillStyle="rgb(185, 168, 145)",s.fillRect(0,0,t.width,t.height),s.beginPath(),s.closePath()},reStart:function(){this.reDraw(),this.drawChessBoard(),this.endFlag=!1,this.step=0,this.stepHis=0,this.hisValArr=[],this.historyPos=[],this.showModal=!1},backChess:function(){var t=this;this.historyPos.length&&!this.endFlag?(this.historyPos.pop(),this.reDraw(),this.drawChessBoard(),this.historyPos.forEach(function(s){t.drawChess(s.cx,s.cy,s.color),t.chessMapArr[s.cx/30-1][s.cy/30-1]=s.color}),this.step--):this.$alert("You cannot withdraw","alert")},cancelBackChess:function(){var t=this;this.hisValArr.length>this.historyPos.length&&!this.endFlag?(this.historyPos.push(this.hisValArr[this.step]),this.reDraw(),this.drawChessBoard(),this.historyPos.forEach(function(s){t.drawChess(s.cx,s.cy,s.color),t.chessMapArr[s.cx/30-1][s.cy/30-1]=s.color}),this.step++):this.$alert("You cannot cancel withdraw","alert")},admit:function(){this.endFlag?this.$alert("Game over, restart?","alert"):(this.endFlag=!0,this.$alert("You already admit defeat, restart?","game end"),this.reDraw(),this.drawChessBoard(),this.endFlag=!1,this.step=0,this.stepHis=0,this.hisValArr=[],this.historyPos=[])}}},h={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"app"}},[e("button",{staticClass:"admit",on:{click:function(s){return t.admit()}}},[t._v("Admit defeat")]),t._v(" "),e("div",{attrs:{id:"content"}},[e("h2",{staticClass:"gameTitle"},[t._v("Gomoku Game")]),t._v(" "),e("div",{staticClass:"main"},[e("canvas",{ref:"canvas",attrs:{id:"myCanvas",width:"480",height:"480"}})]),t._v(" "),e("div",{staticClass:"actionButtons"},[e("button",{staticClass:"backChess",on:{click:function(s){return t.backChess()}}},[t._v("Withdraw")]),t._v(" "),e("button",{staticClass:"cancelBackChess",on:{click:function(s){return t.cancelBackChess()}}},[t._v("Cancel Withdraw")])])]),t._v(" "),e("Modal",{attrs:{title:"alert"},on:{"on-ok":t.ok,"on-cancel":t.cancel},model:{value:t.showModal,callback:function(s){t.showModal=s},expression:"showModal"}},[e("p",{staticClass:"successText"},[t._v(t._s(t.win))]),t._v(" "),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{attrs:{type:"success",size:"large",long:"",loading:t.modal_loading},on:{click:t.reStart}},[t._v("Restart")])],1)])],1)},staticRenderFns:[]};var c=e("VU/8")(n,h,!1,function(t){e("EAJb")},"data-v-16c7940a",null).exports;a.default.use(i.a);var l=new i.a({routes:[{path:"/",name:"chess",component:c,redirect:"/chess"},{path:"/chess",name:"chess",component:c}]}),d=e("zL8q"),f=e.n(d),u=(e("tvR6"),e("BTaQ")),p=e.n(u);e("+skl");a.default.use(p.a),a.default.use(f.a),a.default.config.productionTip=!1,new a.default({el:"#app",router:l,components:{App:o},template:"<App/>"})},d5lC:function(t,s){},tvR6:function(t,s){}},["NHnr"]);
//# sourceMappingURL=app.69d160f96566e8b72451.js.map